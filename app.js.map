{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/alerts.js","public/js/updateSettings.js","public/js/report.js","public/js/filter.js"],"sourcesContent":["/* eslint-disable */\n\nimport '@babel/polyfill';\nimport { login, logout, signup } from './login';\nimport { updateSettings } from './updateSettings';\nimport { report, deleteItem } from './report';\nimport { filter } from './filter';\n// import { bookTour } from './stripe';\n// import { showAlert } from './alerts';\n\n// DOM Elemets\nconst loginForm = document.querySelector('.form--login');\nconst logOutBtn = document.querySelector('.logout-btn');\nconst signupForm = document.querySelector('.form--signup');\nconst userDataForm = document.querySelector('.form--update-setting');\nconst userPasswordForm = document.querySelector('.form--user-password');\nconst reportForm = document.querySelector('.form--report-item');\nconst filterForm = document.querySelector('.form--filter');\nconst deleteItemBtn = document.querySelector('#deleteItem');\n\nif (loginForm)\n  loginForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n\nif (logOutBtn) logOutBtn.addEventListener('click', logout);\n\nif (signupForm)\n  signupForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    document.querySelector('.signup-btn').textContent = 'SIGNING UP...';\n    const name = document.getElementById('name').value;\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('passwordConfirm').value;\n    signup(name, email, password, passwordConfirm);\n  });\n\nif (userDataForm)\n  userDataForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const form = new FormData();\n    form.append('name', document.getElementById('name').value);\n    form.append('email', document.getElementById('email').value);\n    form.append('photo', document.getElementById('photo').files[0]);\n\n    updateSettings(form, 'data');\n  });\n\nif (userPasswordForm)\n  userPasswordForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    await updateSettings(\n      { passwordCurrent, password, passwordConfirm },\n      'password'\n    );\n    document.querySelector('.btn--save-password').textContent = 'Save password';\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n  });\n\nif (reportForm)\n  reportForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const form = new FormData();\n    form.append('name', document.getElementById('itemName').value);\n    form.append('category', document.getElementById('category').value);\n    form.append('location', document.getElementById('locationExact').value);\n    form.append('city', document.getElementById('locationCityInput').value);\n    form.append(\n      'province',\n      document.getElementById('locationProvinceInput').value\n    );\n    form.append('date', document.getElementById('date').value);\n    form.append('reward', document.getElementById('reward').value);\n    form.append('description', document.getElementById('description').value);\n    form.append('contactType', document.getElementById('contactType').value);\n    form.append('contact', document.getElementById('contact').value);\n    form.append('user', document.getElementById('user').value);\n    form.append('itemType', document.getElementById('itemType').value);\n\n    const images3 = document.getElementById('images3').files[0];\n    const images2 = document.getElementById('images2').files[0];\n    const images1 = document.getElementById('images1').files[0];\n\n    form.append('images', images3);\n    form.append('images', images2);\n    form.append('images', images1);\n\n    report(form);\n  });\n\nif (deleteItemBtn)\n  deleteItemBtn.addEventListener('click', async (e) => {\n    e.preventDefault();\n    const item = document.getElementById('deleteItem');\n    const itemId = item.getAttribute('data-item-id');\n\n    console.log(itemId);\n\n    deleteItem(itemId);\n  });\n\nif (filterForm)\n  filterForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const category = document.getElementById('category').value;\n    const city = document.getElementById('locationCityInput').value;\n    const province = document.getElementById('locationProvinceInput').value;\n    const itemType = document.getElementById('itemType').value;\n\n    filter(category, city, province, itemType);\n  });\n\n// if (bookBtn)\n//   bookBtn.addEventListener('click', (e) => {\n//     e.target.textContent = 'Processing...';\n//     const { tourId } = e.target.dataset;\n//     bookTour(tourId);\n//   });\n\n// const alertMessage = document.querySelector('.found-items').dataset.alert;\n// if (alertMessage) showAlert('success', alertMessage, 10);\n","/* eslint-disable */\nimport axios from 'axios';\nimport { showAlert } from './alerts';\n\nexport const login = async (email, password) => {\n  try {\n    const res = await axios({\n      method: 'POST',\n      url: '/api/v1/users/login',\n      data: {\n        email,\n        password,\n      },\n    });\n    if (res.data.status === 'success') {\n      showAlert('success', 'Logged in successfully');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (err) {\n    showAlert('danger', err.response.data.message);\n  }\n};\n\nexport const signup = async (name, email, password, passwordConfirm) => {\n  try {\n    const res = await axios({\n      method: 'POST',\n      url: '/api/v1/users/signup',\n      data: {\n        name,\n        email,\n        password,\n        passwordConfirm,\n      },\n    });\n    if (res.data.status === 'success') {\n      showAlert('success', 'Signed up successfully');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (err) {\n    showAlert('danger', err.response.data.message);\n  }\n};\n\nexport const logout = async () => {\n  try {\n    const res = await axios({\n      method: 'GET',\n      url: '/api/v1/users/logout',\n    });\n    if ((res.data.status = 'success')) {\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (err) {\n    console.log(err.response);\n    showAlert('danger', 'Error logging out! Try again.');\n  }\n};\n","/* eslint-disable */\nexport const hideAlert = () => {\n  const el = document.querySelector('.alert');\n  if (el) el.parentElement.removeChild(el);\n};\n\nexport const showAlert = (type, msg, time = 7) => {\n  hideAlert();\n  const markup = `<div class=\"alert alert-${type} system-alert\" role=\"alert\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  window.setTimeout(hideAlert, time * 1000);\n};\n","/* eslint-disable */\nimport axios from 'axios';\nimport { showAlert } from './alerts';\n\n// type is either 'password', or 'data'\nexport const updateSettings = async (data, type) => {\n  try {\n    const url =\n      type === 'password'\n        ? '/api/v1/users/updateMyPassword'\n        : '/api/v1/users/updateMe';\n\n    const res = await axios({\n      method: 'PATCH',\n      url,\n      data,\n    });\n    if (res.data.status === 'success') {\n      showAlert(\n        'success',\n        `${type.charAt(0).toUpperCase() + type.slice(1)} updated successfully!`\n      );\n    }\n  } catch (err) {\n    showAlert('error', err.response.data.message);\n  }\n};\n","/* eslint-disable */\nimport axios from 'axios';\nimport { showAlert } from './alerts';\n\nexport const report = async (data) => {\n  try {\n    const res = await axios({\n      method: 'POST',\n      url: '/api/v1/items',\n      withCredentials: true,\n      data,\n    });\n\n    if (res.data.status === 'success') {\n      showAlert('success', 'Item posted successfully');\n      window.setTimeout(() => {\n        location.assign(`/my-items`);\n      }, 1500);\n    }\n  } catch (err) {\n    showAlert('danger', err.response.data.message);\n  }\n};\n\nexport const deleteItem = async (data) => {\n  axios\n    .delete(`/api/v1/items/${data}`, { withCredentials: true })\n    .then(() => {\n      showAlert('success', 'Item deleted');\n      window.setTimeout(() => {\n        location.assign(`/my-items`);\n      }, 1500);\n    })\n    .catch((err) => {\n      console.log(err.response);\n      showAlert('danger', 'Error in deleting na item! Please try again.');\n    });\n};\n","/* eslint-disable */\nimport axios from 'axios';\nimport { showAlert } from './alerts';\n\nexport const filter = async (category, city, province, itemType) => {\n  try {\n    const res = await axios({\n      method: 'GET',\n      url: `/api/v1/items?category=${category}&city=${city}&province=${province}`,\n    });\n\n    if (res.data.status === 'success') {\n      //showAlert('success', 'Filter posted successfully');\n      window.setTimeout(() => {\n        location.assign(\n          `/view/${itemType}/search?category=${category}&city=${city}&province=${province}`\n        );\n      }, 1500);\n    }\n  } catch (err) {\n    showAlert('danger', err.response.data.message);\n  }\n};\n"],"names":[],"version":3,"file":"app.js.map","sourceRoot":"/"}